<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: service.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: service.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var db = require("../server") // reference to server


//-------------//
// USERS START //
//-------------//

/** 
 * @function createUser
 * @param {string} username Username of new User
 * @param {string} password Password of new User
 * @description Adds a new User to the table USERS
*/
export function createUser(username, password) {
  var sql = "INSERT INTO USERS (username, password) VALUES (\'"+username+"\',\'"+password+"\')";
    
  return customSQL(sql);
}

/** 
 * @function findUser
 * @param {string} username Username of the desired User
 * @returns {array} Array of usernames selected from table
 * @description Finds Users with the given username
*/
export function findUser(username) {
  var sql = "SELECT username FROM USERS WHERE username=\'"+username+"\'";
    
  return customSQL(sql);
}

/** 
 * @function login
 * @param {string} username Username of User
 * @param {string} password Password of User
 * @returns {boolean} Returns TRUE if the username and password match one in the database, else it returns FALSE
 * @description Checks if a user can log in with the given credentials
*/
export function login(username, password){
  var sql = "SELECT username FROM USERS WHERE username=\'"+username+"\' AND password=\'"+password+"\'"

  if (username == customSQL(sql)[o].username){
    console.log("credentials are valid");
    return true;
  }

  console.log("credentials are invalid");
  return false;
}

//------------//
// USERS STOP //
//------------//

//-------------------//
// SUPER ADMIN START //
//-------------------//

/** 
 * @function createSuperAdmin
 * @param {string} username Username of new Super Admin
 * @param {string} password Password of new Super Admin
 * @description Adds a new Super Admin to the table SUPERADMINS
*/
export function createSuperAdmin(username, password) { 
  var sql = "INSERT INTO SUPERADMIN (username, password) VALUES (\'"+username+"\',\'"+password+"\')";
    
  return customSQL(sql);
}

/** 
 * @function findSuperAdmin
 * @param {string} username Username of the desired Super Admin
 * @returns {array} Array of rows selected from table
 * @description Finds Super Admins with the given username
*/
export function findSuperAdmin(username) {
  var sql = "SELECT * FROM SUPERADMIN WHERE username=\'"+username+"\'";
    
  return customSQL(sql);
}

//------------------//
// SUPER ADMIN STOP //
//------------------//

//----------------//
// LOCATION START //
//----------------//

/** 
 * @function createLocation
 * @param {string} city Location's city
 * @param {string} street_address Location's street_address
 * @param {string} state Location's state
 * @description Adds a new Location to the table LOCATION
*/
export function createLocation(city, street_address, state) {
  var sql = "INSERT INTO LOCATION (city, street_address, state) VALUES (\'"+city+"\',\'"+street_address+"\',\'"+state+"\')";
    
  return customSQL(sql);
}

/**
 * @function findLocation
 * @param {array} searchBy List of parameters to search by. For example: ["state","city"]
 * @param {array} values List of values which corresponds with the list of parameters in searchBy. For example: searhBy = ["state","city"], so values = ["florida","jacksonville"]
 * @returns Array of rows of Locations which contains all fields which are equivalent to those defined by searchBy and values.
 * @description This function allows you to search the LOCATION table with a variety of filters. For example, if you wanted to find a Location where the state is Texas and the city is Dallas, then searchBy = ["state","city"] and values = ["texas","dallas"]
 */
export function findLocation(searchBy, values){
  var sql = "SELECT * FROM LOCATION WHERE \'";
  
  for (var i = 0; i &lt; searchBy.length-1; i++){
    sql += searchBy[0]+"\'=\'"+values[0]+"\' AND "  
  }
  sql += searchBy[0]+"\'=\'"+values[0]+"\'";
  
  return customSQL(sql)
}

/** 
 * @function findLocationByState
 * @param {string} state State of the desired Location
 * @returns {array} Array of rows selected from table
 * @description Finds Locations with the given state
*/
export function findLocationByState(state) {
  var sql = "SELECT * FROM LOCATION WHERE state=\'"+state+"\'";
    
  return customSQL(sql);
}

/** 
 * @function findLocationByCity
 * @param {string} city City of the desired Location
 * @returns {array} Array of rows selected from table
 * @description Finds Locations with the given city
*/
export function findLocationByCity(city) {
  var sql = "SELECT * FROM LOCATION WHERE city=\'"+city+"\'";
    
  return customSQL(sql);
}

/** 
 * @function findLocationByStreet
 * @param {string} street_address Street address of the desired Location
 * @returns {array} Array of rows selected from table
 * @description Finds Locations with the given street address
*/
export function findLocationByStreet(street_address) {
  var sql = "SELECT * FROM LOCATION WHERE street_address=\'"+street_address+"\'";
    
  return customSQL(sql);
}

//---------------//
// LOCATION STOP //
//---------------//

//--------------//
// EVENTS START //
//--------------//

/**
 * @function createEvent
 * @param {number} adminID Id of the Admin in charge of the Event
 * @param {number} locationID Id of the Location of the Event
 * @param {string} name Name of the Event
 * @param {string} category Category of the Event
 * @param {string} description Description of the Event
 * @param {string} url Event's url
 * @param {number} start_date Event's start date
 * @param {number} end_date Event's end date
 * @description Creates a new Event in the Events Table
 */
export function createEvent(adminID, locationID, name, category, description, url, start_date, end_date){
  var sql = "INSERT INTO EVENTS (adminID, locationID, name, category, description, url, start_date, end_date) VALUES (\'"+adminID+"\',\'"+locationID+"\',\'"+name+"\',\'"+category+"\',\'"+description+"\',\'"+url+"\',\'"+start_date+"\',\'"+end_date+"\')";
    
  return customSQL(sql);
}

/**
 * @function findEvent
 * @param {array} searchBy List of parameters to search by. For example: ["adminID","name","category"]
 * @param {array} values List of values which corresponds with the list of parameters in searchBy. For example: searhBy = ["adminID","name","category"], so values = [123,"any_name","some_category"]
 * @returns Array of rows of Events which contains all fields which are equivalent to those defined by searchBy and values.
 * @description This function allows you to search the EVENTS table with a variety of filters. For example, if you wanted to find a Event where the name is party and the start_date is 01/07/20, then searchBy = ["name","start_date"] and values = ["party",01072020]
 */
export function findEvent(searchBy, values){
  var sql = "SELECT * FROM EVENTS WHERE \'";
  
  for (var i = 0; i &lt; searchBy.length-1; i++){
    sql += searchBy[0]+"\'=\'"+values[0]+"\' AND "  
  }
  sql += searchBy[0]+"\'=\'"+values[0]+"\'";
  
  return customSQL(sql)
}

/** 
 * @function findEventByName
 * @param {string} name Name of the Event
 * @returns {array} Array of rows selected from table
 * @description Finds Events with the given name
*/
export function findEventByName(name){
  var sql = "SELECT * FROM EVENTS WHERE name=\'"+name+"\'";
    
  return customSQL(sql);
}

/** 
 * @function findEventByCategory
 * @param {string} category Category of the Event
 * @returns {array} Array of rows selected from table
 * @description Finds Events with the given category
*/
export function findEventByCategory(category){
  var sql = "SELECT * FROM EVENTS WHERE category=\'"+category+"\'";
    
  return customSQL(sql);
}

/** 
 * @function findEventByStartDate
 * @param {string} start_date Start date of the Event
 * @returns {array} Array of rows selected from table
 * @description Finds Events with the given start date
*/
export function findEventByStartDate(start_date){
  var sql = "SELECT * FROM EVENTS WHERE start_date=\'"+start_date+"\'";
    
  return customSQL(sql);
}

/** 
 * @function findEventByEndDate
 * @param {string} end_date name of the Event
 * @returns {array} Array of rows selected from table
 * @description Finds Events with the given end_date
*/
export function findEventByEndDate(end_date){
  var sql = "SELECT * FROM EVENTS WHERE end_date=\'"+end_date+"\'";
    
  return customSQL(sql);
}

/**
 * @function allEvents
 * @returns Returns all Events in the EVENTS table
 * @description Selects all Events from Events
 */
export function allEvents(){
  var sql = "SELECT * FROM EVENTS"

  return customSQL(sql);
}

/**
 * @function locationOfEvent
 * @param {number} idLocation Id of the location as given in the Event data
 * @returns {array} Array of Locations where the Event is being held
 * @description Gets the details of the location where the Event is being held
 */
export function locationOfEvent(idLocation){
  var sql = "SELECT * FROM LOCATION INNER JOIN EVENTS ON LOCATION.idLocation=EVENTS.locationID WHERE idLocation=\'"+idLocation+"\'"

  return customSQL(sql);
}

/**
 * @function adminOfEvent
 * @param {number} idLocation Id of the admin as given in the Event data
 * @returns {array} Array of admins that are in charge of the Event
 * @description Gets the username of the admin in charge of the Event 
 */
export function adminOfEvent(idUSERS){
  var sql = "SELECT username FROM USERS INNER JOIN EVENTS ON USERS.idUSERS=EVENTS.adminID WHERE idUSERS=\'"+idUSERS+"\'"

  return customSQL(sql);
}

//-------------//
// EVENTS STOP //
//-------------//

/** 
 * @function customSQL
 * @param {string} sql Line of sql you wish to run
 * @returns {array} Array of rows pulled from sql command, if any
 * @description Runs any custom line of sql against the database
*/
export function customSQL(sql) {
    db.connection.connect() //connects us to database
    
    connection.query(sql, function (err, rows, fields) {
        if (err) throw err
      
        console.log('sql statement succefully executed')  
      })
    
    db.connection.end() // ends connection
    
    if (rows == NULL) return 0;
    
    return rows;
}

db.connection.request</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#adminOfEvent">adminOfEvent</a></li><li><a href="global.html#allEvents">allEvents</a></li><li><a href="global.html#createEvent">createEvent</a></li><li><a href="global.html#createLocation">createLocation</a></li><li><a href="global.html#createSuperAdmin">createSuperAdmin</a></li><li><a href="global.html#createUser">createUser</a></li><li><a href="global.html#customSQL">customSQL</a></li><li><a href="global.html#findEvent">findEvent</a></li><li><a href="global.html#findEventByCategory">findEventByCategory</a></li><li><a href="global.html#findEventByEndDate">findEventByEndDate</a></li><li><a href="global.html#findEventByName">findEventByName</a></li><li><a href="global.html#findEventByStartDate">findEventByStartDate</a></li><li><a href="global.html#findLocation">findLocation</a></li><li><a href="global.html#findLocationByCity">findLocationByCity</a></li><li><a href="global.html#findLocationByState">findLocationByState</a></li><li><a href="global.html#findLocationByStreet">findLocationByStreet</a></li><li><a href="global.html#findSuperAdmin">findSuperAdmin</a></li><li><a href="global.html#findUser">findUser</a></li><li><a href="global.html#locationOfEvent">locationOfEvent</a></li><li><a href="global.html#login">login</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Mon Nov 30 2020 21:42:01 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
